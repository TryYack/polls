{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nvar _jsxFileName = \"/Users/joduplessis/Work/Weekday/polls/components/form.component.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { Progress, Button, Input, Textarea, Select } from '@weekday/elements';\nimport moment from 'moment';\nimport { Trash } from 'react-feather';\nexport default function FormComponent(props) {\n  var today = moment();\n  var months = [{\n    option: 'January',\n    value: 1\n  }, {\n    option: 'February',\n    value: 2\n  }, {\n    option: 'March',\n    value: 3\n  }, {\n    option: 'April',\n    value: 4\n  }, {\n    option: 'May',\n    value: 5\n  }, {\n    option: 'June',\n    value: 6\n  }, {\n    option: 'July',\n    value: 7\n  }, {\n    option: 'August',\n    value: 8\n  }, {\n    option: 'September',\n    value: 9\n  }, {\n    option: 'October',\n    value: 10\n  }, {\n    option: 'November',\n    value: 11\n  }, {\n    option: 'December',\n    value: 12\n  }];\n  var years = [{\n    option: today.year(),\n    value: today.year()\n  }, {\n    option: today.year() + 1,\n    value: today.year() + 1\n  }];\n\n  var _useState = useState(null),\n      days = _useState[0],\n      setDays = _useState[1];\n\n  var _useState2 = useState(null),\n      id = _useState2[0],\n      setId = _useState2[1];\n\n  var _useState3 = useState(''),\n      title = _useState3[0],\n      setTitle = _useState3[1];\n\n  var _useState4 = useState(''),\n      description = _useState4[0],\n      setDescription = _useState4[1];\n\n  var _useState5 = useState([{\n    id: 0,\n    text: ''\n  }]),\n      options = _useState5[0],\n      setOptions = _useState5[1]; // These all set the index\n\n\n  var _useState6 = useState(today.format('D') - 1),\n      day = _useState6[0],\n      setDay = _useState6[1];\n\n  var _useState7 = useState(today.format('M') - 1),\n      month = _useState7[0],\n      setMonth = _useState7[1];\n\n  var _useState8 = useState(0),\n      year = _useState8[0],\n      setYear = _useState8[1];\n\n  var addOption = function addOption() {\n    return setOptions([].concat(_toConsumableArray(options), [{\n      id: options.length + 1,\n      text: ''\n    }]));\n  };\n\n  var removeOption = function removeOption(index) {\n    var mutableOptions = _Object$assign([], options);\n\n    mutableOptions.splice(index, 1);\n    setOptions(mutableOptions);\n  };\n\n  var updateOption = function updateOption(text, id) {\n    setOptions(options.map(function (option) {\n      if (id != option.id) return option;\n      return {\n        id: option.id,\n        text: text\n      };\n    }));\n  };\n\n  var save = function save() {\n    var expiry = moment(\"\".concat(day, \"/\").concat(month, \"/\").concat(year), 'DD/MM/YYYY').toDate(); // If we are updating\n\n    if (id) props.onSubmit(id, title, description, options, expiry); // If we are creating\n\n    if (!id) props.onSubmit(title, description, options, expiry);\n  };\n\n  var updateMonthDays = function updateMonthDays() {\n    var daysInMonth = moment(\"\".concat(day, \"/\").concat(month, \"/\").concat(year), 'DD/MM/YYYY').daysInMonth();\n    var daysArray = [];\n\n    for (var _day = 1; _day <= daysInMonth; _day++) {\n      daysArray.push({\n        option: _day,\n        value: _day\n      });\n    }\n\n    setDays(daysArray);\n  };\n\n  useEffect(function () {\n    // Don't do anything if it's a create\n    if (!props.id) return updateMonthDays();\n    var date = moment(props.expiry).isValid() ? moment(props.expiry) : moment();\n    var yearIndex = years.map(function (y) {\n      return y.value;\n    }).indexOf(_parseInt(date.format('YYYY')));\n    setId(props.id);\n    setTitle(props.title);\n    setDescription(props.description);\n    setOptions(props.options);\n    setDay(date.format('D') - 1);\n    setMonth(date.format('M') - 1);\n    setYear(yearIndex == -1 ? 0 : yearIndex);\n    updateMonthDays();\n  }, []);\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, __jsx(_JSXStyle, {\n    id: \"674474010\",\n    __self: this\n  }, \".poll-container.jsx-674474010{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.poll-inner.jsx-674474010{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.progress-container.jsx-674474010{margin-bottom:5px;width:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2R1cGxlc3Npcy9Xb3JrL1dlZWtkYXkvcG9sbHMvY29tcG9uZW50cy9mb3JtLmNvbXBvbmVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrR2tCLEFBR3NCLEFBU1csQUFRSixXQWhCTCxPQWlCRixXQUNiLGlEQVRlLE9BUlMsbUVBU0gsV0FSQyxrRkFTQyxlQVJBLDZEQVNFLGVBUkEsb0ZBU3pCLGVBUkEiLCJmaWxlIjoiL1VzZXJzL2pvZHVwbGVzc2lzL1dvcmsvV2Vla2RheS9wb2xscy9jb21wb25lbnRzL2Zvcm0uY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IFByb2dyZXNzLCBCdXR0b24sIElucHV0LCBUZXh0YXJlYSwgU2VsZWN0IH0gZnJvbSAnQHdlZWtkYXkvZWxlbWVudHMnXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCdcbmltcG9ydCB7IFRyYXNoIH0gZnJvbSAncmVhY3QtZmVhdGhlcidcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRm9ybUNvbXBvbmVudChwcm9wcykge1xuICBjb25zdCB0b2RheSA9IG1vbWVudCgpXG4gIGNvbnN0IG1vbnRocyA9IFtcbiAgICB7IG9wdGlvbjogJ0phbnVhcnknLCB2YWx1ZTogMSB9LFxuICAgIHsgb3B0aW9uOiAnRmVicnVhcnknLCB2YWx1ZTogMiB9LFxuICAgIHsgb3B0aW9uOiAnTWFyY2gnLCB2YWx1ZTogMyB9LFxuICAgIHsgb3B0aW9uOiAnQXByaWwnLCB2YWx1ZTogNCB9LFxuICAgIHsgb3B0aW9uOiAnTWF5JywgdmFsdWU6IDUgfSxcbiAgICB7IG9wdGlvbjogJ0p1bmUnLCB2YWx1ZTogNiB9LFxuICAgIHsgb3B0aW9uOiAnSnVseScsIHZhbHVlOiA3IH0sXG4gICAgeyBvcHRpb246ICdBdWd1c3QnLCB2YWx1ZTogOCB9LFxuICAgIHsgb3B0aW9uOiAnU2VwdGVtYmVyJywgdmFsdWU6IDkgfSxcbiAgICB7IG9wdGlvbjogJ09jdG9iZXInLCB2YWx1ZTogMTAgfSxcbiAgICB7IG9wdGlvbjogJ05vdmVtYmVyJywgdmFsdWU6IDExIH0sXG4gICAgeyBvcHRpb246ICdEZWNlbWJlcicsIHZhbHVlOiAxMiB9LFxuICBdXG4gIGNvbnN0IHllYXJzID0gW1xuICAgIHsgb3B0aW9uOiB0b2RheS55ZWFyKCksIHZhbHVlOiB0b2RheS55ZWFyKCkgfSxcbiAgICB7IG9wdGlvbjogdG9kYXkueWVhcigpICsgMSwgdmFsdWU6IHRvZGF5LnllYXIoKSArIDEgfSxcbiAgXVxuICBjb25zdCBbZGF5cywgc2V0RGF5c10gPSB1c2VTdGF0ZShudWxsKVxuXG4gIGNvbnN0IFtpZCwgc2V0SWRdID0gdXNlU3RhdGUobnVsbClcbiAgY29uc3QgW3RpdGxlLCBzZXRUaXRsZV0gPSB1c2VTdGF0ZSgnJylcbiAgY29uc3QgW2Rlc2NyaXB0aW9uLCBzZXREZXNjcmlwdGlvbl0gPSB1c2VTdGF0ZSgnJylcbiAgY29uc3QgW29wdGlvbnMsIHNldE9wdGlvbnNdID0gdXNlU3RhdGUoW3tpZDogMCwgdGV4dDogJyd9XSlcblxuICAvLyBUaGVzZSBhbGwgc2V0IHRoZSBpbmRleFxuICBjb25zdCBbZGF5LCBzZXREYXldID0gdXNlU3RhdGUodG9kYXkuZm9ybWF0KCdEJykgLSAxKVxuICBjb25zdCBbbW9udGgsIHNldE1vbnRoXSA9IHVzZVN0YXRlKHRvZGF5LmZvcm1hdCgnTScpIC0gMSlcbiAgY29uc3QgW3llYXIsIHNldFllYXJdID0gdXNlU3RhdGUoMClcblxuICBjb25zdCBhZGRPcHRpb24gPSAoKSA9PiBzZXRPcHRpb25zKFsuLi5vcHRpb25zLCB7XG4gICAgaWQ6IG9wdGlvbnMubGVuZ3RoICsgMSxcbiAgICB0ZXh0OiAnJyxcbiAgfV0pXG5cbiAgY29uc3QgcmVtb3ZlT3B0aW9uID0gKGluZGV4KSA9PiB7XG4gICAgbGV0IG11dGFibGVPcHRpb25zID0gT2JqZWN0LmFzc2lnbihbXSwgb3B0aW9ucylcbiAgICBtdXRhYmxlT3B0aW9ucy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgc2V0T3B0aW9ucyhtdXRhYmxlT3B0aW9ucylcbiAgfVxuXG4gIGNvbnN0IHVwZGF0ZU9wdGlvbiA9ICh0ZXh0LCBpZCkgPT4ge1xuICAgIHNldE9wdGlvbnMob3B0aW9ucy5tYXAob3B0aW9uID0+IHtcbiAgICAgIGlmIChpZCAhPSBvcHRpb24uaWQpIHJldHVybiBvcHRpb25cblxuICAgICAgcmV0dXJuIHsgaWQ6IG9wdGlvbi5pZCwgdGV4dCB9XG4gICAgfSkpXG4gIH1cblxuICBjb25zdCBzYXZlID0gKCkgPT4ge1xuICAgIGNvbnN0IGV4cGlyeSA9IG1vbWVudChgJHtkYXl9LyR7bW9udGh9LyR7eWVhcn1gLCAnREQvTU0vWVlZWScpLnRvRGF0ZSgpXG5cbiAgICAvLyBJZiB3ZSBhcmUgdXBkYXRpbmdcbiAgICBpZiAoaWQpIHByb3BzLm9uU3VibWl0KGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIG9wdGlvbnMsIGV4cGlyeSlcblxuICAgIC8vIElmIHdlIGFyZSBjcmVhdGluZ1xuICAgIGlmICghaWQpIHByb3BzLm9uU3VibWl0KHRpdGxlLCBkZXNjcmlwdGlvbiwgb3B0aW9ucywgZXhwaXJ5KVxuICB9XG5cbiAgY29uc3QgdXBkYXRlTW9udGhEYXlzID0gKCkgPT4ge1xuICAgIGNvbnN0IGRheXNJbk1vbnRoID0gbW9tZW50KGAke2RheX0vJHttb250aH0vJHt5ZWFyfWAsICdERC9NTS9ZWVlZJykuZGF5c0luTW9udGgoKVxuICAgIGNvbnN0IGRheXNBcnJheSA9IFtdXG5cbiAgICBmb3IgKGxldCBkYXk9MTsgZGF5IDw9IGRheXNJbk1vbnRoOyBkYXkrKykge1xuICAgICAgZGF5c0FycmF5LnB1c2goeyBvcHRpb246IGRheSwgdmFsdWU6IGRheSB9KVxuICAgIH1cblxuICAgIHNldERheXMoZGF5c0FycmF5KVxuICB9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiBpdCdzIGEgY3JlYXRlXG4gICAgaWYgKCFwcm9wcy5pZCkgcmV0dXJuIHVwZGF0ZU1vbnRoRGF5cygpXG5cbiAgICBjb25zdCBkYXRlID0gbW9tZW50KHByb3BzLmV4cGlyeSkuaXNWYWxpZCgpID8gbW9tZW50KHByb3BzLmV4cGlyeSkgOiBtb21lbnQoKVxuICAgIGNvbnN0IHllYXJJbmRleCA9IHllYXJzLm1hcCh5ID0+IHkudmFsdWUpLmluZGV4T2YocGFyc2VJbnQoZGF0ZS5mb3JtYXQoJ1lZWVknKSkpXG5cbiAgICBzZXRJZChwcm9wcy5pZClcbiAgICBzZXRUaXRsZShwcm9wcy50aXRsZSlcbiAgICBzZXREZXNjcmlwdGlvbihwcm9wcy5kZXNjcmlwdGlvbilcbiAgICBzZXRPcHRpb25zKHByb3BzLm9wdGlvbnMpXG5cbiAgICBzZXREYXkoZGF0ZS5mb3JtYXQoJ0QnKSAtIDEpXG4gICAgc2V0TW9udGgoZGF0ZS5mb3JtYXQoJ00nKSAtIDEpXG4gICAgc2V0WWVhcih5ZWFySW5kZXggPT0gLTEgPyAwIDogeWVhckluZGV4KVxuXG4gICAgdXBkYXRlTW9udGhEYXlzKClcbiAgfSwgW10pXG5cbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5wb2xsLWNvbnRhaW5lciB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xuICAgICAgICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wb2xsLWlubmVyIHtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAucHJvZ3Jlc3MtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwb2xsLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBvbGwtaW5uZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImg0IGNvbG9yLWQzIHRleHQtbGVmdCB3LTEwMCBtYi0yMFwiPkNyZWF0ZSBhIG5ldyBwb2xsPC9kaXY+XG5cbiAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgIHZhbHVlPXt0aXRsZX1cbiAgICAgICAgICAgIGlucHV0U2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUG9sbCB0aXRsZVwiXG4gICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRUaXRsZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgLz5cblxuICAgICAgICAgIDxUZXh0YXJlYVxuICAgICAgICAgICAgdmFsdWU9e2Rlc2NyaXB0aW9ufVxuICAgICAgICAgICAgdGV4dGFyZWFTaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQb2xsIGRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgIHJvd3M9ezN9XG4gICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXREZXNjcmlwdGlvbihlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgLz5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaDUgY29sb3ItZDAgdGV4dC1sZWZ0IHctMTAwIG1iLTEwIG10LTIwXCI+T3B0aW9uczwvZGl2PlxuXG4gICAgICAgICAge29wdGlvbnMubWFwKChvcHRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyB3LTEwMCBtYi01XCIga2V5PXtpbmRleH0+XG4gICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17b3B0aW9uLnRleHR9XG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk9wdGlvbiB0ZXh0XCJcbiAgICAgICAgICAgICAgICAgIGlucHV0U2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHVwZGF0ZU9wdGlvbihlLnRhcmdldC52YWx1ZSwgb3B0aW9uLmlkKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8VHJhc2hcbiAgICAgICAgICAgICAgICAgIGNvbG9yPVwiI0FDQjVCRFwiXG4gICAgICAgICAgICAgICAgICBzaXplPVwiMjBcIlxuICAgICAgICAgICAgICAgICAgdGhpY2tuZXNzPVwiMS41XCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1sLTIwIGJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtlID0+IHJlbW92ZU9wdGlvbihpbmRleCl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfSl9XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImg1IGNvbG9yLWQwIHRleHQtbGVmdCB3LTEwMCBtYi0xMCBtdC0yMFwiPkV4cGlyeTwvZGl2PlxuXG4gICAgICAgICAge2RheXMgJiZcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93IHctMTAwXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleGVyIGNvbHVtbiBwci0xMFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic21hbGwgY29sb3ItZDAgdGV4dC1sZWZ0IGJvbGQgbWItNVwiPkRheTwvZGl2PlxuICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkPXtkYXl9XG4gICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9eyhpbmRleCkgPT4gc2V0RGF5KGluZGV4KX1cbiAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e2RheXN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4ZXIgY29sdW1uIHAtMTBcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtYWxsIGNvbG9yLWQwIHRleHQtbGVmdCBib2xkIG1iLTVcIj5Nb250aDwvZGl2PlxuICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkPXttb250aH1cbiAgICAgICAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICAgICAgICBvblNlbGVjdD17KGluZGV4KSA9PiBzZXRNb250aChpbmRleCl9XG4gICAgICAgICAgICAgICAgICBvcHRpb25zPXttb250aHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4ZXIgY29sdW1uIHBsLTEwXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbWFsbCBjb2xvci1kMCB0ZXh0LWxlZnQgYm9sZCBtYi01XCI+WWVhcjwvZGl2PlxuICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkPXt5ZWFyfVxuICAgICAgICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXsoaW5kZXgpID0+IHNldFllYXIoaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgb3B0aW9ucz17eWVhcnN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyB3LTEwMCBtdC0yMFwiPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgICAgICB0aGVtZT1cImJsdWUtYm9yZGVyXCJcbiAgICAgICAgICAgICAgdGV4dD1cIkFkZCBhIG5ldyBvcHRpb25cIlxuICAgICAgICAgICAgICBvbkNsaWNrPXthZGRPcHRpb259XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4ZXJcIiAvPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgICAgICB0aGVtZT1cImJsdWVcIlxuICAgICAgICAgICAgICB0ZXh0PXshcHJvcHMuaWQgPyBcIkNyZWF0ZSBwb2xsXCIgOiBcIlVwZGF0ZSBwb2xsXCJ9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3NhdmV9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgKVxufVxuIl19 */\\n/*@ sourceURL=/Users/joduplessis/Work/Weekday/polls/components/form.component.js */\"), __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"poll-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"poll-inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"h4 color-d3 text-left w-100 mb-20\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, \"Create a new poll\"), __jsx(Input, {\n    value: title,\n    inputSize: \"large\",\n    placeholder: \"Poll title\",\n    onChange: function onChange(e) {\n      return setTitle(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }), __jsx(Textarea, {\n    value: description,\n    textareaSize: \"large\",\n    placeholder: \"Poll description\",\n    rows: 3,\n    onChange: function onChange(e) {\n      return setDescription(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"h5 color-d0 text-left w-100 mb-10 mt-20\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"Options\"), options.map(function (option, index) {\n    return __jsx(\"div\", {\n      key: index,\n      className: \"jsx-674474010\" + \" \" + \"row w-100 mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, __jsx(Input, {\n      value: option.text,\n      placeholder: \"Option text\",\n      inputSize: \"large\",\n      onChange: function onChange(e) {\n        return updateOption(e.target.value, option.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }), __jsx(Trash, {\n      color: \"#ACB5BD\",\n      size: \"20\",\n      thickness: \"1.5\",\n      className: \"ml-20 button\",\n      onClick: function onClick(e) {\n        return removeOption(index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }));\n  }), __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"h5 color-d0 text-left w-100 mb-10 mt-20\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, \"Expiry\"), days && __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"row w-100\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"flexer column pr-10\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"small color-d0 text-left bold mb-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, \"Day\"), __jsx(Select, {\n    selected: day,\n    size: \"large\",\n    onSelect: function onSelect(index) {\n      return setDay(index);\n    },\n    options: days,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"flexer column p-10\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"small color-d0 text-left bold mb-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, \"Month\"), __jsx(Select, {\n    selected: month,\n    size: \"large\",\n    onSelect: function onSelect(index) {\n      return setMonth(index);\n    },\n    options: months,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"flexer column pl-10\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"small color-d0 text-left bold mb-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, \"Year\"), __jsx(Select, {\n    selected: year,\n    size: \"large\",\n    onSelect: function onSelect(index) {\n      return setYear(index);\n    },\n    options: years,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"row w-100 mt-20\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, __jsx(Button, {\n    size: \"small\",\n    theme: \"blue-border\",\n    text: \"Add a new option\",\n    onClick: addOption,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-674474010\" + \" \" + \"flexer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }), __jsx(Button, {\n    size: \"small\",\n    theme: \"blue\",\n    text: !props.id ? \"Create poll\" : \"Update poll\",\n    onClick: save,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  })))));\n}","map":{"version":3,"sources":["/Users/joduplessis/Work/Weekday/polls/components/form.component.js"],"names":["React","useState","useEffect","Progress","Button","Input","Textarea","Select","moment","Trash","FormComponent","props","today","months","option","value","years","year","days","setDays","id","setId","title","setTitle","description","setDescription","text","options","setOptions","format","day","setDay","month","setMonth","setYear","addOption","length","removeOption","index","mutableOptions","splice","updateOption","map","save","expiry","toDate","onSubmit","updateMonthDays","daysInMonth","daysArray","push","date","isValid","yearIndex","y","indexOf","e","target"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,EAAmBC,MAAnB,EAA2BC,KAA3B,EAAkCC,QAAlC,EAA4CC,MAA5C,QAA0D,mBAA1D;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,KAAT,QAAsB,eAAtB;AAEA,eAAe,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAC3C,MAAMC,KAAK,GAAGJ,MAAM,EAApB;AACA,MAAMK,MAAM,GAAG,CACb;AAAEC,IAAAA,MAAM,EAAE,SAAV;AAAqBC,IAAAA,KAAK,EAAE;AAA5B,GADa,EAEb;AAAED,IAAAA,MAAM,EAAE,UAAV;AAAsBC,IAAAA,KAAK,EAAE;AAA7B,GAFa,EAGb;AAAED,IAAAA,MAAM,EAAE,OAAV;AAAmBC,IAAAA,KAAK,EAAE;AAA1B,GAHa,EAIb;AAAED,IAAAA,MAAM,EAAE,OAAV;AAAmBC,IAAAA,KAAK,EAAE;AAA1B,GAJa,EAKb;AAAED,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,KAAK,EAAE;AAAxB,GALa,EAMb;AAAED,IAAAA,MAAM,EAAE,MAAV;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GANa,EAOb;AAAED,IAAAA,MAAM,EAAE,MAAV;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GAPa,EAQb;AAAED,IAAAA,MAAM,EAAE,QAAV;AAAoBC,IAAAA,KAAK,EAAE;AAA3B,GARa,EASb;AAAED,IAAAA,MAAM,EAAE,WAAV;AAAuBC,IAAAA,KAAK,EAAE;AAA9B,GATa,EAUb;AAAED,IAAAA,MAAM,EAAE,SAAV;AAAqBC,IAAAA,KAAK,EAAE;AAA5B,GAVa,EAWb;AAAED,IAAAA,MAAM,EAAE,UAAV;AAAsBC,IAAAA,KAAK,EAAE;AAA7B,GAXa,EAYb;AAAED,IAAAA,MAAM,EAAE,UAAV;AAAsBC,IAAAA,KAAK,EAAE;AAA7B,GAZa,CAAf;AAcA,MAAMC,KAAK,GAAG,CACZ;AAAEF,IAAAA,MAAM,EAAEF,KAAK,CAACK,IAAN,EAAV;AAAwBF,IAAAA,KAAK,EAAEH,KAAK,CAACK,IAAN;AAA/B,GADY,EAEZ;AAAEH,IAAAA,MAAM,EAAEF,KAAK,CAACK,IAAN,KAAe,CAAzB;AAA4BF,IAAAA,KAAK,EAAEH,KAAK,CAACK,IAAN,KAAe;AAAlD,GAFY,CAAd;;AAhB2C,kBAoBnBhB,QAAQ,CAAC,IAAD,CApBW;AAAA,MAoBpCiB,IApBoC;AAAA,MAoB9BC,OApB8B;;AAAA,mBAsBvBlB,QAAQ,CAAC,IAAD,CAtBe;AAAA,MAsBpCmB,EAtBoC;AAAA,MAsBhCC,KAtBgC;;AAAA,mBAuBjBpB,QAAQ,CAAC,EAAD,CAvBS;AAAA,MAuBpCqB,KAvBoC;AAAA,MAuB7BC,QAvB6B;;AAAA,mBAwBLtB,QAAQ,CAAC,EAAD,CAxBH;AAAA,MAwBpCuB,WAxBoC;AAAA,MAwBvBC,cAxBuB;;AAAA,mBAyBbxB,QAAQ,CAAC,CAAC;AAACmB,IAAAA,EAAE,EAAE,CAAL;AAAQM,IAAAA,IAAI,EAAE;AAAd,GAAD,CAAD,CAzBK;AAAA,MAyBpCC,OAzBoC;AAAA,MAyB3BC,UAzB2B,kBA2B3C;;;AA3B2C,mBA4BrB3B,QAAQ,CAACW,KAAK,CAACiB,MAAN,CAAa,GAAb,IAAoB,CAArB,CA5Ba;AAAA,MA4BpCC,GA5BoC;AAAA,MA4B/BC,MA5B+B;;AAAA,mBA6BjB9B,QAAQ,CAACW,KAAK,CAACiB,MAAN,CAAa,GAAb,IAAoB,CAArB,CA7BS;AAAA,MA6BpCG,KA7BoC;AAAA,MA6B7BC,QA7B6B;;AAAA,mBA8BnBhC,QAAQ,CAAC,CAAD,CA9BW;AAAA,MA8BpCgB,IA9BoC;AAAA,MA8B9BiB,OA9B8B;;AAgC3C,MAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA,WAAMP,UAAU,8BAAKD,OAAL,IAAc;AAC9CP,MAAAA,EAAE,EAAEO,OAAO,CAACS,MAAR,GAAiB,CADyB;AAE9CV,MAAAA,IAAI,EAAE;AAFwC,KAAd,GAAhB;AAAA,GAAlB;;AAKA,MAAMW,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD,EAAW;AAC9B,QAAIC,cAAc,GAAG,eAAc,EAAd,EAAkBZ,OAAlB,CAArB;;AACAY,IAAAA,cAAc,CAACC,MAAf,CAAsBF,KAAtB,EAA6B,CAA7B;AACAV,IAAAA,UAAU,CAACW,cAAD,CAAV;AACD,GAJD;;AAMA,MAAME,YAAY,GAAG,SAAfA,YAAe,CAACf,IAAD,EAAON,EAAP,EAAc;AACjCQ,IAAAA,UAAU,CAACD,OAAO,CAACe,GAAR,CAAY,UAAA5B,MAAM,EAAI;AAC/B,UAAIM,EAAE,IAAIN,MAAM,CAACM,EAAjB,EAAqB,OAAON,MAAP;AAErB,aAAO;AAAEM,QAAAA,EAAE,EAAEN,MAAM,CAACM,EAAb;AAAiBM,QAAAA,IAAI,EAAJA;AAAjB,OAAP;AACD,KAJU,CAAD,CAAV;AAKD,GAND;;AAQA,MAAMiB,IAAI,GAAG,SAAPA,IAAO,GAAM;AACjB,QAAMC,MAAM,GAAGpC,MAAM,WAAIsB,GAAJ,cAAWE,KAAX,cAAoBf,IAApB,GAA4B,YAA5B,CAAN,CAAgD4B,MAAhD,EAAf,CADiB,CAGjB;;AACA,QAAIzB,EAAJ,EAAQT,KAAK,CAACmC,QAAN,CAAe1B,EAAf,EAAmBE,KAAnB,EAA0BE,WAA1B,EAAuCG,OAAvC,EAAgDiB,MAAhD,EAJS,CAMjB;;AACA,QAAI,CAACxB,EAAL,EAAST,KAAK,CAACmC,QAAN,CAAexB,KAAf,EAAsBE,WAAtB,EAAmCG,OAAnC,EAA4CiB,MAA5C;AACV,GARD;;AAUA,MAAMG,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B,QAAMC,WAAW,GAAGxC,MAAM,WAAIsB,GAAJ,cAAWE,KAAX,cAAoBf,IAApB,GAA4B,YAA5B,CAAN,CAAgD+B,WAAhD,EAApB;AACA,QAAMC,SAAS,GAAG,EAAlB;;AAEA,SAAK,IAAInB,IAAG,GAAC,CAAb,EAAgBA,IAAG,IAAIkB,WAAvB,EAAoClB,IAAG,EAAvC,EAA2C;AACzCmB,MAAAA,SAAS,CAACC,IAAV,CAAe;AAAEpC,QAAAA,MAAM,EAAEgB,IAAV;AAAef,QAAAA,KAAK,EAAEe;AAAtB,OAAf;AACD;;AAEDX,IAAAA,OAAO,CAAC8B,SAAD,CAAP;AACD,GATD;;AAWA/C,EAAAA,SAAS,CAAC,YAAM;AACd;AACA,QAAI,CAACS,KAAK,CAACS,EAAX,EAAe,OAAO2B,eAAe,EAAtB;AAEf,QAAMI,IAAI,GAAG3C,MAAM,CAACG,KAAK,CAACiC,MAAP,CAAN,CAAqBQ,OAArB,KAAiC5C,MAAM,CAACG,KAAK,CAACiC,MAAP,CAAvC,GAAwDpC,MAAM,EAA3E;AACA,QAAM6C,SAAS,GAAGrC,KAAK,CAAC0B,GAAN,CAAU,UAAAY,CAAC;AAAA,aAAIA,CAAC,CAACvC,KAAN;AAAA,KAAX,EAAwBwC,OAAxB,CAAgC,UAASJ,IAAI,CAACtB,MAAL,CAAY,MAAZ,CAAT,CAAhC,CAAlB;AAEAR,IAAAA,KAAK,CAACV,KAAK,CAACS,EAAP,CAAL;AACAG,IAAAA,QAAQ,CAACZ,KAAK,CAACW,KAAP,CAAR;AACAG,IAAAA,cAAc,CAACd,KAAK,CAACa,WAAP,CAAd;AACAI,IAAAA,UAAU,CAACjB,KAAK,CAACgB,OAAP,CAAV;AAEAI,IAAAA,MAAM,CAACoB,IAAI,CAACtB,MAAL,CAAY,GAAZ,IAAmB,CAApB,CAAN;AACAI,IAAAA,QAAQ,CAACkB,IAAI,CAACtB,MAAL,CAAY,GAAZ,IAAmB,CAApB,CAAR;AACAK,IAAAA,OAAO,CAACmB,SAAS,IAAI,CAAC,CAAd,GAAkB,CAAlB,GAAsBA,SAAvB,CAAP;AAEAN,IAAAA,eAAe;AAChB,GAjBQ,EAiBN,EAjBM,CAAT;AAmBA,SACE,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6uUAyBE;AAAA,uCAAe,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAGE,MAAC,KAAD;AACE,IAAA,KAAK,EAAEzB,KADT;AAEE,IAAA,SAAS,EAAC,OAFZ;AAGE,IAAA,WAAW,EAAC,YAHd;AAIE,IAAA,QAAQ,EAAE,kBAAAkC,CAAC;AAAA,aAAIjC,QAAQ,CAACiC,CAAC,CAACC,MAAF,CAAS1C,KAAV,CAAZ;AAAA,KAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAUE,MAAC,QAAD;AACE,IAAA,KAAK,EAAES,WADT;AAEE,IAAA,YAAY,EAAC,OAFf;AAGE,IAAA,WAAW,EAAC,kBAHd;AAIE,IAAA,IAAI,EAAE,CAJR;AAKE,IAAA,QAAQ,EAAE,kBAAAgC,CAAC;AAAA,aAAI/B,cAAc,CAAC+B,CAAC,CAACC,MAAF,CAAS1C,KAAV,CAAlB;AAAA,KALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,EAkBE;AAAA,uCAAe,yCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAlBF,EAoBGY,OAAO,CAACe,GAAR,CAAY,UAAC5B,MAAD,EAASwB,KAAT,EAAmB;AAC9B,WACE;AAAgC,MAAA,GAAG,EAAEA,KAArC;AAAA,yCAAe,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,KAAD;AACE,MAAA,KAAK,EAAExB,MAAM,CAACY,IADhB;AAEE,MAAA,WAAW,EAAC,aAFd;AAGE,MAAA,SAAS,EAAC,OAHZ;AAIE,MAAA,QAAQ,EAAE,kBAAA8B,CAAC;AAAA,eAAIf,YAAY,CAACe,CAAC,CAACC,MAAF,CAAS1C,KAAV,EAAiBD,MAAM,CAACM,EAAxB,CAAhB;AAAA,OAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOA,MAAC,KAAD;AACI,MAAA,KAAK,EAAC,SADV;AAEI,MAAA,IAAI,EAAC,IAFT;AAGI,MAAA,SAAS,EAAC,KAHd;AAII,MAAA,SAAS,EAAC,cAJd;AAKI,MAAA,OAAO,EAAE,iBAAAoC,CAAC;AAAA,eAAInB,YAAY,CAACC,KAAD,CAAhB;AAAA,OALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPA,CADF;AAiBD,GAlBA,CApBH,EAwCE;AAAA,uCAAe,yCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAxCF,EA0CGpB,IAAI,IACH;AAAA,uCAAe,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,EAEE,MAAC,MAAD;AACE,IAAA,QAAQ,EAAEY,GADZ;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,QAAQ,EAAE,kBAACQ,KAAD;AAAA,aAAWP,MAAM,CAACO,KAAD,CAAjB;AAAA,KAHZ;AAIE,IAAA,OAAO,EAAEpB,IAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,EAWE;AAAA,uCAAe,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAEE,MAAC,MAAD;AACE,IAAA,QAAQ,EAAEc,KADZ;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,QAAQ,EAAE,kBAACM,KAAD;AAAA,aAAWL,QAAQ,CAACK,KAAD,CAAnB;AAAA,KAHZ;AAIE,IAAA,OAAO,EAAEzB,MAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAXF,EAqBE;AAAA,uCAAe,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,uCAAe,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAEE,MAAC,MAAD;AACE,IAAA,QAAQ,EAAEI,IADZ;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,QAAQ,EAAE,kBAACqB,KAAD;AAAA,aAAWJ,OAAO,CAACI,KAAD,CAAlB;AAAA,KAHZ;AAIE,IAAA,OAAO,EAAEtB,KAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CArBF,CA3CJ,EA4EE;AAAA,uCAAe,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,KAAK,EAAC,aAFR;AAGE,IAAA,IAAI,EAAC,kBAHP;AAIE,IAAA,OAAO,EAAEmB,SAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAOE;AAAA,uCAAe,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,EAQE,MAAC,MAAD;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,KAAK,EAAC,MAFR;AAGE,IAAA,IAAI,EAAE,CAACxB,KAAK,CAACS,EAAP,GAAY,aAAZ,GAA4B,aAHpC;AAIE,IAAA,OAAO,EAAEuB,IAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CA5EF,CADF,CAzBF,CADF;AA2HD","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Progress, Button, Input, Textarea, Select } from '@weekday/elements'\nimport moment from 'moment'\nimport { Trash } from 'react-feather'\n\nexport default function FormComponent(props) {\n  const today = moment()\n  const months = [\n    { option: 'January', value: 1 },\n    { option: 'February', value: 2 },\n    { option: 'March', value: 3 },\n    { option: 'April', value: 4 },\n    { option: 'May', value: 5 },\n    { option: 'June', value: 6 },\n    { option: 'July', value: 7 },\n    { option: 'August', value: 8 },\n    { option: 'September', value: 9 },\n    { option: 'October', value: 10 },\n    { option: 'November', value: 11 },\n    { option: 'December', value: 12 },\n  ]\n  const years = [\n    { option: today.year(), value: today.year() },\n    { option: today.year() + 1, value: today.year() + 1 },\n  ]\n  const [days, setDays] = useState(null)\n\n  const [id, setId] = useState(null)\n  const [title, setTitle] = useState('')\n  const [description, setDescription] = useState('')\n  const [options, setOptions] = useState([{id: 0, text: ''}])\n\n  // These all set the index\n  const [day, setDay] = useState(today.format('D') - 1)\n  const [month, setMonth] = useState(today.format('M') - 1)\n  const [year, setYear] = useState(0)\n\n  const addOption = () => setOptions([...options, {\n    id: options.length + 1,\n    text: '',\n  }])\n\n  const removeOption = (index) => {\n    let mutableOptions = Object.assign([], options)\n    mutableOptions.splice(index, 1)\n    setOptions(mutableOptions)\n  }\n\n  const updateOption = (text, id) => {\n    setOptions(options.map(option => {\n      if (id != option.id) return option\n\n      return { id: option.id, text }\n    }))\n  }\n\n  const save = () => {\n    const expiry = moment(`${day}/${month}/${year}`, 'DD/MM/YYYY').toDate()\n\n    // If we are updating\n    if (id) props.onSubmit(id, title, description, options, expiry)\n\n    // If we are creating\n    if (!id) props.onSubmit(title, description, options, expiry)\n  }\n\n  const updateMonthDays = () => {\n    const daysInMonth = moment(`${day}/${month}/${year}`, 'DD/MM/YYYY').daysInMonth()\n    const daysArray = []\n\n    for (let day=1; day <= daysInMonth; day++) {\n      daysArray.push({ option: day, value: day })\n    }\n\n    setDays(daysArray)\n  }\n\n  useEffect(() => {\n    // Don't do anything if it's a create\n    if (!props.id) return updateMonthDays()\n\n    const date = moment(props.expiry).isValid() ? moment(props.expiry) : moment()\n    const yearIndex = years.map(y => y.value).indexOf(parseInt(date.format('YYYY')))\n\n    setId(props.id)\n    setTitle(props.title)\n    setDescription(props.description)\n    setOptions(props.options)\n\n    setDay(date.format('D') - 1)\n    setMonth(date.format('M') - 1)\n    setYear(yearIndex == -1 ? 0 : yearIndex)\n\n    updateMonthDays()\n  }, [])\n\n  return (\n    <React.Fragment>\n      <style jsx>{`\n        .poll-container {\n          width: 100%;\n          display: flex;\n          flex-direction: column;\n          align-items: stretch;\n          align-content: center;\n          justify-content: center;\n        }\n\n        .poll-inner {\n          flex-direction: column;\n          display: flex;\n          align-items: center;\n          align-content: center;\n          justify-content: center;\n        }\n\n        .progress-container {\n          margin-bottom: 5px;\n          width: 100%;\n        }\n      `}</style>\n\n      <div className=\"poll-container\">\n        <div className=\"poll-inner\">\n          <div className=\"h4 color-d3 text-left w-100 mb-20\">Create a new poll</div>\n\n          <Input\n            value={title}\n            inputSize=\"large\"\n            placeholder=\"Poll title\"\n            onChange={e => setTitle(e.target.value)}\n          />\n\n          <Textarea\n            value={description}\n            textareaSize=\"large\"\n            placeholder=\"Poll description\"\n            rows={3}\n            onChange={e => setDescription(e.target.value)}\n          />\n\n          <div className=\"h5 color-d0 text-left w-100 mb-10 mt-20\">Options</div>\n\n          {options.map((option, index) => {\n            return (\n              <div className=\"row w-100 mb-5\" key={index}>\n                <Input\n                  value={option.text}\n                  placeholder=\"Option text\"\n                  inputSize=\"large\"\n                  onChange={e => updateOption(e.target.value, option.id)}\n                />\n              <Trash\n                  color=\"#ACB5BD\"\n                  size=\"20\"\n                  thickness=\"1.5\"\n                  className=\"ml-20 button\"\n                  onClick={e => removeOption(index)}\n                />\n              </div>\n            )\n          })}\n\n          <div className=\"h5 color-d0 text-left w-100 mb-10 mt-20\">Expiry</div>\n\n          {days &&\n            <div className=\"row w-100\">\n              <div className=\"flexer column pr-10\">\n                <div className=\"small color-d0 text-left bold mb-5\">Day</div>\n                <Select\n                  selected={day}\n                  size=\"large\"\n                  onSelect={(index) => setDay(index)}\n                  options={days}\n                />\n              </div>\n\n              <div className=\"flexer column p-10\">\n                <div className=\"small color-d0 text-left bold mb-5\">Month</div>\n                <Select\n                  selected={month}\n                  size=\"large\"\n                  onSelect={(index) => setMonth(index)}\n                  options={months}\n                />\n              </div>\n\n              <div className=\"flexer column pl-10\">\n                <div className=\"small color-d0 text-left bold mb-5\">Year</div>\n                <Select\n                  selected={year}\n                  size=\"large\"\n                  onSelect={(index) => setYear(index)}\n                  options={years}\n                />\n              </div>\n            </div>\n          }\n\n          <div className=\"row w-100 mt-20\">\n            <Button\n              size=\"small\"\n              theme=\"blue-border\"\n              text=\"Add a new option\"\n              onClick={addOption}\n            />\n            <div className=\"flexer\" />\n            <Button\n              size=\"small\"\n              theme=\"blue\"\n              text={!props.id ? \"Create poll\" : \"Update poll\"}\n              onClick={save}\n            />\n          </div>\n\n        </div>\n      </div>\n    </React.Fragment>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}